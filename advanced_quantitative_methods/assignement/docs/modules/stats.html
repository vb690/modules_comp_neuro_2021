<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>modules.stats API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>modules.stats</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import numpy as np

import pymc3 as pm
from theano import tensor as tt


def build_logistic_model(df, null_model=True, priors={
                                &#39;Intercept&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 5},
                                &#39;Format Slope&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 5},
                                &#39;Order Slope&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 5},
                                &#39;Interaction Slope&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 5}
                                }
                         ):
    &#34;&#34;&#34;Ad-Hoc function for building the computational graph for a
    logistic model in PyMC3 evaluating the impact of the binary factors
    FnoA Order and Format and their interaction on number of normatively
    correct responses. More precisely the model is a binomial regression where
    given the number of successes and total trials we try to estimate the
    parameter p using a logitic model.

        Args:
            df (DataFrame): pandas DataFrame containing the data to analyze.
            null_model (bool): boolean specifying if the generated model is
                intercept only or will include the predictors.
            priors (dict): a dictionary specifying the parameters of the
                gaussian priors for the model. By default they are set to be
                    only weakly informative. Keys are components of the model
                    while values are dictionaries reporting the mu and sigma
                    values for the gaussians.

        Returns:
            log_reg (PyMC3 model): a PyMC3 model containing the computational
                graph for a logistic regression.
    &#34;&#34;&#34;
    with pm.Model() as log_reg:

        form = pm.Data(
            name=&#39;Format&#39;,
            value=np.array(
                [1 if i == &#39;Disease&#39; else 0 for i in df[&#39;format&#39;].values]
            )
        )
        order = pm.Data(
            name=&#39;Order&#39;,
            value=np.array(
                [1 if i == &#39;FnoA Second&#39; else 0 for i
                    in df[&#39;fnoa_order&#39;].values]
            )
        )

        n = pm.Data(
            name=&#39;N&#39;,
            value=df[&#39;total_norm_corr&#39;].values
        )
        observed = pm.Data(
            name=&#39;Observed&#39;,
            value=df[&#39;n_norm_corr&#39;].values
        )

        intercept = pm.Normal(
            mu=priors[&#39;Intercept&#39;][&#39;mu&#39;],
            sd=priors[&#39;Intercept&#39;][&#39;sigma&#39;],
            name=&#39;Intercept&#39;
        )

        if not null_model:
            slope_form = pm.Normal(
                mu=priors[&#39;Format Slope&#39;][&#39;mu&#39;],
                sd=priors[&#39;Format Slope&#39;][&#39;sigma&#39;],
                name=&#39;Format Slope&#39;
            )
            slope_order = pm.Normal(
                mu=priors[&#39;Order Slope&#39;][&#39;mu&#39;],
                sd=priors[&#39;Order Slope&#39;][&#39;sigma&#39;],
                name=&#39;Order Slope&#39;
            )
            slope_interaction = pm.Normal(
                mu=priors[&#39;Interaction Slope&#39;][&#39;mu&#39;],
                sd=priors[&#39;Interaction Slope&#39;][&#39;sigma&#39;],
                name=&#39;Interaction Slope&#39;
            )

            theta = intercept + slope_form*form + slope_order*order + \
                slope_interaction*form*order
        else:
            theta = intercept

        p = pm.math.sigmoid(
            theta
        )

        outcome = pm.Binomial(
            name=&#39;Outcome&#39;,
            n=n,
            p=p,
            observed=observed
        )

    return log_reg


def build_pearson_model(df, X, y, priors={
                            # we assume standardization
                            &#39;Mus&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 1},
                            &#39;Sigmas&#39;: {&#39;beta&#39;: 1},
                            &#39;Rho&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 0.25}
                            }
                        ):
    &#34;&#34;&#34;Function for building the computational graph for a Pearson correlation
    model between two variables.

        Args:
            df (DataFrame): a pandas DataFrame
            X (str): a string specifying column of the first variable in df
            y (str): a string specifying column of the second variable in df
            priors (dict): a dictionary specifying the parameters of the
                priors for the model. By default they are set to be
                only weakly informative. Keys are components of the model
                while values are dictionaries reporting the parameters of the
                relevant distribution.

        Returns:
            pearson_model (PyMC3 model): a PyMC3 model containing the
                computational graph for a pearson correlation.
    &#34;&#34;&#34;
    with pm.Model() as pearson_model:
        Xy = pm.Data(
            name=&#39;Xy&#39;,
            value=df[[X, y]].values
        )
        bounded_normal = pm.Bound(pm.Normal, lower=-1, upper=1)

        mu = pm.Normal(
            name=&#39;Mus&#39;,
            mu=priors[&#39;Mus&#39;][&#39;mu&#39;],
            sigma=priors[&#39;Mus&#39;][&#39;sigma&#39;],
            shape=2
        )
        sigma = pm.HalfCauchy(
            name=&#39;Sigmas&#39;,
            beta=priors[&#39;Sigmas&#39;][&#39;beta&#39;],
            shape=2
        )
        # we want to have slightly informative priors for the correlation
        # coeffiient, here values beyond -0.75, 0.75 are going to be very
        # unlikely. Note that these priors are very generous for a psychology
        # study.
        rho = bounded_normal(
            name=&#39;Rho&#39;,
            mu=priors[&#39;Rho&#39;][&#39;mu&#39;],
            sigma=priors[&#39;Rho&#39;][&#39;sigma&#39;]
        )

        covariance = pm.Deterministic(
            &#39;Covariance&#39;,
            tt.stacklists(
                [
                    [sigma[0]**2, rho * sigma[0] * sigma[1]],
                    [rho * sigma[0] * sigma[1], sigma[1]**2]
                ]
            ),
        )
        # precision as invers of varianc

        observed = pm.MvNormal(
            name=&#39;Xy_out&#39;,
            mu=mu,
            cov=covariance,
            observed=Xy
        )

    return pearson_model</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="modules.stats.build_logistic_model"><code class="name flex">
<span>def <span class="ident">build_logistic_model</span></span>(<span>df, null_model=True, priors={'Intercept': {'mu': 0, 'sigma': 5}, 'Format Slope': {'mu': 0, 'sigma': 5}, 'Order Slope': {'mu': 0, 'sigma': 5}, 'Interaction Slope': {'mu': 0, 'sigma': 5}})</span>
</code></dt>
<dd>
<div class="desc"><p>Ad-Hoc function for building the computational graph for a
logistic model in PyMC3 evaluating the impact of the binary factors
FnoA Order and Format and their interaction on number of normatively
correct responses. More precisely the model is a binomial regression where
given the number of successes and total trials we try to estimate the
parameter p using a logitic model.</p>
<pre><code>Args:
    df (DataFrame): pandas DataFrame containing the data to analyze.
    null_model (bool): boolean specifying if the generated model is
        intercept only or will include the predictors.
    priors (dict): a dictionary specifying the parameters of the
        gaussian priors for the model. By default they are set to be
            only weakly informative. Keys are components of the model
            while values are dictionaries reporting the mu and sigma
            values for the gaussians.

Returns:
    log_reg (PyMC3 model): a PyMC3 model containing the computational
        graph for a logistic regression.
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def build_logistic_model(df, null_model=True, priors={
                                &#39;Intercept&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 5},
                                &#39;Format Slope&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 5},
                                &#39;Order Slope&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 5},
                                &#39;Interaction Slope&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 5}
                                }
                         ):
    &#34;&#34;&#34;Ad-Hoc function for building the computational graph for a
    logistic model in PyMC3 evaluating the impact of the binary factors
    FnoA Order and Format and their interaction on number of normatively
    correct responses. More precisely the model is a binomial regression where
    given the number of successes and total trials we try to estimate the
    parameter p using a logitic model.

        Args:
            df (DataFrame): pandas DataFrame containing the data to analyze.
            null_model (bool): boolean specifying if the generated model is
                intercept only or will include the predictors.
            priors (dict): a dictionary specifying the parameters of the
                gaussian priors for the model. By default they are set to be
                    only weakly informative. Keys are components of the model
                    while values are dictionaries reporting the mu and sigma
                    values for the gaussians.

        Returns:
            log_reg (PyMC3 model): a PyMC3 model containing the computational
                graph for a logistic regression.
    &#34;&#34;&#34;
    with pm.Model() as log_reg:

        form = pm.Data(
            name=&#39;Format&#39;,
            value=np.array(
                [1 if i == &#39;Disease&#39; else 0 for i in df[&#39;format&#39;].values]
            )
        )
        order = pm.Data(
            name=&#39;Order&#39;,
            value=np.array(
                [1 if i == &#39;FnoA Second&#39; else 0 for i
                    in df[&#39;fnoa_order&#39;].values]
            )
        )

        n = pm.Data(
            name=&#39;N&#39;,
            value=df[&#39;total_norm_corr&#39;].values
        )
        observed = pm.Data(
            name=&#39;Observed&#39;,
            value=df[&#39;n_norm_corr&#39;].values
        )

        intercept = pm.Normal(
            mu=priors[&#39;Intercept&#39;][&#39;mu&#39;],
            sd=priors[&#39;Intercept&#39;][&#39;sigma&#39;],
            name=&#39;Intercept&#39;
        )

        if not null_model:
            slope_form = pm.Normal(
                mu=priors[&#39;Format Slope&#39;][&#39;mu&#39;],
                sd=priors[&#39;Format Slope&#39;][&#39;sigma&#39;],
                name=&#39;Format Slope&#39;
            )
            slope_order = pm.Normal(
                mu=priors[&#39;Order Slope&#39;][&#39;mu&#39;],
                sd=priors[&#39;Order Slope&#39;][&#39;sigma&#39;],
                name=&#39;Order Slope&#39;
            )
            slope_interaction = pm.Normal(
                mu=priors[&#39;Interaction Slope&#39;][&#39;mu&#39;],
                sd=priors[&#39;Interaction Slope&#39;][&#39;sigma&#39;],
                name=&#39;Interaction Slope&#39;
            )

            theta = intercept + slope_form*form + slope_order*order + \
                slope_interaction*form*order
        else:
            theta = intercept

        p = pm.math.sigmoid(
            theta
        )

        outcome = pm.Binomial(
            name=&#39;Outcome&#39;,
            n=n,
            p=p,
            observed=observed
        )

    return log_reg</code></pre>
</details>
</dd>
<dt id="modules.stats.build_pearson_model"><code class="name flex">
<span>def <span class="ident">build_pearson_model</span></span>(<span>df, X, y, priors={'Mus': {'mu': 0, 'sigma': 1}, 'Sigmas': {'beta': 1}, 'Rho': {'mu': 0, 'sigma': 0.25}})</span>
</code></dt>
<dd>
<div class="desc"><p>Function for building the computational graph for a Pearson correlation
model between two variables.</p>
<pre><code>Args:
    df (DataFrame): a pandas DataFrame
    X (str): a string specifying column of the first variable in df
    y (str): a string specifying column of the second variable in df
    priors (dict): a dictionary specifying the parameters of the
        priors for the model. By default they are set to be
        only weakly informative. Keys are components of the model
        while values are dictionaries reporting the parameters of the
        relevant distribution.

Returns:
    pearson_model (PyMC3 model): a PyMC3 model containing the
        computational graph for a pearson correlation.
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def build_pearson_model(df, X, y, priors={
                            # we assume standardization
                            &#39;Mus&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 1},
                            &#39;Sigmas&#39;: {&#39;beta&#39;: 1},
                            &#39;Rho&#39;: {&#39;mu&#39;: 0, &#39;sigma&#39;: 0.25}
                            }
                        ):
    &#34;&#34;&#34;Function for building the computational graph for a Pearson correlation
    model between two variables.

        Args:
            df (DataFrame): a pandas DataFrame
            X (str): a string specifying column of the first variable in df
            y (str): a string specifying column of the second variable in df
            priors (dict): a dictionary specifying the parameters of the
                priors for the model. By default they are set to be
                only weakly informative. Keys are components of the model
                while values are dictionaries reporting the parameters of the
                relevant distribution.

        Returns:
            pearson_model (PyMC3 model): a PyMC3 model containing the
                computational graph for a pearson correlation.
    &#34;&#34;&#34;
    with pm.Model() as pearson_model:
        Xy = pm.Data(
            name=&#39;Xy&#39;,
            value=df[[X, y]].values
        )
        bounded_normal = pm.Bound(pm.Normal, lower=-1, upper=1)

        mu = pm.Normal(
            name=&#39;Mus&#39;,
            mu=priors[&#39;Mus&#39;][&#39;mu&#39;],
            sigma=priors[&#39;Mus&#39;][&#39;sigma&#39;],
            shape=2
        )
        sigma = pm.HalfCauchy(
            name=&#39;Sigmas&#39;,
            beta=priors[&#39;Sigmas&#39;][&#39;beta&#39;],
            shape=2
        )
        # we want to have slightly informative priors for the correlation
        # coeffiient, here values beyond -0.75, 0.75 are going to be very
        # unlikely. Note that these priors are very generous for a psychology
        # study.
        rho = bounded_normal(
            name=&#39;Rho&#39;,
            mu=priors[&#39;Rho&#39;][&#39;mu&#39;],
            sigma=priors[&#39;Rho&#39;][&#39;sigma&#39;]
        )

        covariance = pm.Deterministic(
            &#39;Covariance&#39;,
            tt.stacklists(
                [
                    [sigma[0]**2, rho * sigma[0] * sigma[1]],
                    [rho * sigma[0] * sigma[1], sigma[1]**2]
                ]
            ),
        )
        # precision as invers of varianc

        observed = pm.MvNormal(
            name=&#39;Xy_out&#39;,
            mu=mu,
            cov=covariance,
            observed=Xy
        )

    return pearson_model</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="modules" href="index.html">modules</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="modules.stats.build_logistic_model" href="#modules.stats.build_logistic_model">build_logistic_model</a></code></li>
<li><code><a title="modules.stats.build_pearson_model" href="#modules.stats.build_pearson_model">build_pearson_model</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>